# AI Governance Framework

> What AI is allowed to do, what it is forbidden from doing, and how actions are audited

## Purpose

This document establishes clear boundaries for AI automation within Atlas-AI infrastructure. It serves as both a policy document and a technical reference for implementing controls.

## Core Principles

1. **Explicit Allowlisting**: AI can only do what is explicitly permitted
2. **Audit Trail**: Every AI action must be logged
3. **Human Override**: Humans can always intervene and override
4. **Blast Radius Containment**: AI mistakes should be containable
5. **Reversibility**: Prefer reversible actions over irreversible ones

## The AI Identity: atlas@atlas-ai.com

### What This Account Is

- A **system identity** for AI automation
- A **standard user** with no administrative privileges
- An **auditable sender** for outbound communications

### What This Account Is NOT

- NOT an administrator
- NOT a human impersonator
- NOT a catch-all for automation

## Permissions Matrix

### Email Operations

| Action | Permitted | Method | Approval | Logging |
|--------|-----------|--------|----------|---------|
| Send email (atlas@) | ✅ YES | Gmail MCP | Hook can require | Local + Workspace |
| Read inbox | ❌ NO | N/A | N/A | N/A |
| Access ops@ account | ❌ NO | N/A | N/A | N/A |
| Access admin@ account | ❌ NO | N/A | N/A | N/A |
| Create email filters | ❌ NO | N/A | N/A | N/A |
| Modify account settings | ❌ NO | N/A | N/A | N/A |

### File Operations (Nextcloud)

| Action | Permitted | Scope | Approval | Logging |
|--------|-----------|-------|----------|---------|
| Write to AI-Memory/ | ✅ YES | /AI-Memory/* only | None | Nextcloud logs |
| Read from AI-Memory/ | ✅ YES | /AI-Memory/* only | None | Nextcloud logs |
| Read from Projects/ | ❌ NO | N/A | N/A | N/A |
| Write to Projects/ | ❌ NO | N/A | N/A | N/A |
| Read from Archive/ | ❌ NO | N/A | N/A | N/A |
| Delete any files | ❌ NO | N/A | N/A | N/A |
| Share files externally | ❌ NO | N/A | N/A | N/A |

### Infrastructure Operations

| Action | Permitted | Notes |
|--------|-----------|-------|
| Modify DNS records | ❌ NO | Human only via registrar console |
| Access Google Admin Console | ❌ NO | No credentials provided |
| Create/modify users | ❌ NO | Admin privilege required |
| Change billing | ❌ NO | Admin privilege required |
| Modify server configs | ❌ NO | Human only via SSH |
| Install software | ❌ NO | Human only |
| Access production databases | ❌ NO | Unless explicitly scoped |

### Local Machine Operations (Claude Code)

| Action | Permitted | Notes |
|--------|-----------|-------|
| Read files | ✅ YES | Most paths allowed |
| Write files | ✅ YES | Project directories |
| Execute commands | ✅ YES | Sandboxed by default |
| Network requests | ✅ YES | For MCP servers |
| Sudo/root access | ❌ NO | Never granted |

## Email Sending Rules

### The "Atlas Email Protocol"

All AI-generated emails MUST follow these rules:

```
┌─────────────────────────────────────────────────────────────────┐
│                 ATLAS EMAIL PROTOCOL                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  1. SENDER                                                       │
│     └── MUST be: atlas@atlas-ai.com                              │
│     └── NEVER: admin@, ops@, or any other address                │
│                                                                  │
│  2. DISCLOSURE                                                   │
│     └── Email footer MUST include AI disclosure:                 │
│         "This message was generated by an AI assistant."         │
│     └── OR clearly AI-attributed in body                         │
│                                                                  │
│  3. RECIPIENTS                                                   │
│     └── Verified email addresses only                            │
│     └── No mass mailing without explicit permission              │
│     └── Maximum 10 recipients per email                          │
│                                                                  │
│  4. CONTENT                                                      │
│     └── No impersonation of humans                               │
│     └── No deceptive content                                     │
│     └── No sensitive data unless encrypted                       │
│                                                                  │
│  5. LOGGING                                                      │
│     └── Every send logged to ~/.claude/logs/email/               │
│     └── Log includes: timestamp, recipient, subject              │
│     └── Body hashed (not stored in full)                         │
│                                                                  │
│  6. APPROVAL (optional, configurable)                            │
│     └── Pre-send hook can require human approval                 │
│     └── Approval can be domain-based (internal = auto,           │
│         external = require approval)                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Email Denylist

AI is **never** allowed to email:

- Regulatory bodies (without human review)
- Legal entities (without human review)
- Media contacts (without human review)
- Domains on explicit denylist

### Email Rate Limits

| Scope | Limit | Period |
|-------|-------|--------|
| Per recipient | 5 emails | 24 hours |
| Total outbound | 50 emails | 24 hours |
| Per session | 10 emails | 1 hour |

## Audit Requirements

### What Gets Logged

| Category | Data Logged | Retention |
|----------|-------------|-----------|
| Email sends | Recipient, subject, timestamp, hash | 90 days |
| File writes | Path, size, timestamp | 30 days |
| API calls | Endpoint, params, response code | 14 days |
| Errors | Full error, stack trace | 30 days |

### Log Locations

| System | Log Path | Format |
|--------|----------|--------|
| Email (local) | ~/.claude/logs/email/ | JSON |
| Email (Workspace) | Google Admin → Reports | Google format |
| Nextcloud | /var/log/nextcloud/ | JSON |
| Claude Code | ~/.claude/logs/ | JSON |

### Log Review

- **Weekly**: Spot-check AI email sends
- **Monthly**: Review Nextcloud access patterns
- **Quarterly**: Full audit of AI actions
- **On incident**: Immediate full review

## Rollback and Recovery

### Email Rollback

Sent emails **cannot** be unsent. Mitigation options:
1. Send correction/retraction email
2. Contact recipient directly (human)
3. Document incident

### File Rollback

Nextcloud maintains version history. Recovery:
1. Navigate to file → Versions
2. Restore previous version
3. Or restore from backup

### Configuration Rollback

All infrastructure changes are human-only, so rollback is:
1. Git revert for IaC
2. Manual revert for console changes
3. Documented in ops-runbook.md

## Incident Response

### AI Sends Inappropriate Email

1. **Contain**: Revoke OAuth tokens immediately
2. **Assess**: Review email content and recipients
3. **Notify**: Inform affected parties if needed
4. **Remediate**: Fix the prompt/hook that allowed it
5. **Document**: Add to incident log

### AI Writes Sensitive Data to Wrong Location

1. **Contain**: Delete or move the file
2. **Assess**: Who has access? Data sensitivity?
3. **Remediate**: Tighten file access controls
4. **Document**: Update governance rules

### AI Rate Limit Exceeded

1. **Automatic**: Gmail MCP will fail gracefully
2. **Review**: Why did AI try to send so many?
3. **Adjust**: Rate limits or prompt behavior

## Forbidden Actions (Explicit Denylist)

The AI is **explicitly forbidden** from:

1. **Identity Actions**
   - Impersonating humans
   - Claiming to be something it's not
   - Using false names or credentials

2. **Security Actions**
   - Attempting to access restricted systems
   - Trying to escalate privileges
   - Bypassing access controls
   - Storing credentials in plaintext

3. **External Actions**
   - Contacting regulators without approval
   - Making financial commitments
   - Signing contracts or agreements
   - Making public statements for the company

4. **Data Actions**
   - Exfiltrating sensitive data
   - Sharing data with unauthorized parties
   - Storing PII outside designated systems
   - Accessing data beyond scope

## Governance Review Cycle

| Review | Frequency | Owner | Output |
|--------|-----------|-------|--------|
| Log audit | Weekly | ops | Anomaly report |
| Policy review | Quarterly | admin | Updated governance doc |
| Penetration test | Annually | External | Security findings |
| Full audit | Annually | External | Compliance report |

## Version Control

This document is version-controlled. Changes require:

1. Documented rationale
2. Review by admin@
3. Testing of new controls
4. Update to ops-runbook.md

---

*AI Governance Version: 1.0.0 | Effective: 2025-12-31 | Next Review: 2026-03-31*
